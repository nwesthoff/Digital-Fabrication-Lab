---
path: "/implementation"
title: "Implementation"
subtitle: "Architectural overview"
date: "2019-04-04"
---

# Java concepts

Before we started programming in Android Studio, we divided the our main functionalities over the group. Annemar started working on the Login and Profile page, Avelien on the Order page and Nils on the Admin web page.

The first thing we discovered while programming in java, is that we had to make many more classes than we thought. We went from 4 classes to FIXME classes (see figure FIXME).

- Class diagram uit Android studio

# Android concepts

We used three fragments to switch quickly between the different tabs in the app; Requests, Printers and Showcase. Combined with the bottom navigation bar, to navigate to the news and profile page, the user can find all pages quickly.

Since the tabs, request, printers and showcase are all related to the order made by the students we chose to use them as fragments. The pages Request, News and Profile are however not related to each other and therefore these are separated activities.

- Intent structure image > de flow door de app in android studio

# GUI

Since the app is a project for the TUDelft we choose to implement the style of all TU Delft websites and apps. Therefore the colors blue, grey and white are used. We used the color pink to highlight some elements.

## Login page

By making the Sign in button pink and the Register button grey the Sign in button stands out more and it is clear for the user to click on the button.

## Edit pages (Order, Register, Settings)

For the register, profile settings and add request page we used the similar layout the get consistency in the app. The edit text fields have grey hints and the pages start with a rounded image.

Because we used the rounded images in this pages, all profile images and add buttons used in the app are `<Circle image views/>`.

By clicking on the confirm buttons you go to the previous page. So confirm project → back to request fragment. Confirm settings → back to profile page. By clicking on Register you go to the start screen which is the request fragment. If you want to go back you can click on de arrow to the left of your android navigation bar.

## Tab navigation and bottom navigation bar

Since nowadays all screens are very large, we used a bottom navigation bar to navigate to the pages, request news and profile. With the blue icon the user can see in what page he is in.

Since the overview of the requests, printers and showcase are all linked to the request page we use fragments within the request page to navigate to those features. With the pink line underneath the tab name, the user can see in which fragment he is.

## Showcase and requests fragment

The showcase en the requests fragment are both an overview. Therefor the pages have a quite similar layout. Both pages look a bit like an instagram feed. In the showcase you can also like public projects. For the layout we used a recyclerview. The items shown have a separate item xml file to define the layout of the items.

```java
public class MainActivity extends AppCompatActivity {

    private SectionsPagerAdapter mSectionsPagerAdapter;
    private BottomNavigationView mMainNav;
    private ViewPager mViewPager;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Toolbar toolbar = findViewById(R.id.toolbar);
        setSupportActionBar(toolbar);

        mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());

        FragmentTransaction fragmentTransaction = getSupportFragmentManager().beginTransaction();
        fragmentTransaction.commit();

        mViewPager = findViewById(R.id.container);
        mViewPager.setAdapter(mSectionsPagerAdapter);

        TabLayout tabLayout = findViewById(R.id.tabs);

        mViewPager.addOnPageChangeListener(new TabLayout.TabLayoutOnPageChangeListener(tabLayout));
        tabLayout.addOnTabSelectedListener(new TabLayout.ViewPagerOnTabSelectedListener(mViewPager));

        mMainNav = findViewById(R.id.main_nav);

        mMainNav.setOnNavigationItemSelectedListener(new BottomNavigationView.OnNavigationItemSelectedListener() {
            @Override
            public boolean onNavigationItemSelected(@NonNull MenuItem menuItem) {

                switch (menuItem.getItemId()) {
                    case R.id.nav_profile:
                        Intent intent1 = new Intent(MainActivity.this, Profile.class);
                        startActivity(intent1);
                        break;

                    case R.id.nav_request:
                        mMainNav.setItemBackgroundResource(R.color.colorPrimary);
                        break;

                    case R.id.nav_news:
                        Intent intent2 = new Intent(MainActivity.this, News.class);
                        startActivity(intent2);
                        break;

                    default:
                }
                return false;
            }
        });
    }


    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.menu_requests, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        int id = item.getItemId();

        if (id == R.id.action_settings) {
            return true;
        }

        return super.onOptionsItemSelected(item);
    }

    public class SectionsPagerAdapter extends FragmentPagerAdapter {

        public SectionsPagerAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int position) {
            Fragment fragment = null;
            switch (position) {
                case 0:
                    fragment = new Tab1Fragment();
                    break;
                case 1:
                    fragment = new Tab2Fragment();
                    break;
                case 2:
                    fragment = new Tab3Fragment();
                    break;
            }
            return fragment;
        }

        @Override
        public int getCount() {
            return 3;
        }


    }
}
```

# Database, authentication and storage

**Database:** using Firestore

**Making a render of file (Nils?)**

**Connected with Admin website**

**Challenges:**
Creating a spinner from firebase collection (printers):
Difficult due to async nature of API call
Used https://www.youtube.com/watch?v=0ofkvm97i0s
Get ID to ref in Printer class https://stackoverflow.com/questions/48931468/setting-a-custom-object-to-a-spinner-and-showing-a-specific-property
No errors, but code also not working
